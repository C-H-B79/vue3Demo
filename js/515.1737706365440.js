"use strict";(self["webpackChunkvue3_demo"]=self["webpackChunkvue3_demo"]||[]).push([[515],{8515:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});n(4114);var a=n(641),s=n(33),u=n(953);class r{constructor(t){this.count=0,this.maxCount=t,this.queue=new Array}async add(t){this.count>=this.maxCount&&await new Promise(((t,e)=>{this.queue.push(t)})),this.count++;const e=await t();return this.count--,this.queue.length>0&&this.queue.shift()(),e}}var o=r;function i(t){let e=new Date(t),n=e.getFullYear(),a=e.getMonth()+1;a=String(a).padStart(2,"0");let s=e.getDate();s=String(s).padStart(2,"0");let u=e.getHours();u=String(u).padStart(2,"0");let r=e.getMinutes();r=String(r).padStart(2,"0");let o=e.getSeconds();o=String(o).padStart(2,"0");let i=n+"-"+a+"-"+s+" "+u+":"+r+":"+o;return{year:n,month:a,day:s,hour:u,minute:r,second:o,dateStr:i}}const l=t=>((0,a.Qi)("data-v-04555684"),t=t(),(0,a.jt)(),t),c={class:"queueWait"},d={class:"queue-result"},h=l((()=>(0,a.Lk)("div",{class:""},"队列结果列表",-1)));var g={__name:"index",setup(t){let e=(0,u.KR)();const n=(0,u.KR)([]);(0,a.sV)((()=>{e=new o(2),r()}));const r=()=>{console.log(e),l(1e3,1),l(2e3,2),l(3e3,3),l(4e3,4),l(5e3,5),l(6e3,6)},l=(t,a)=>{e.add((()=>g(t))).then((()=>{let t={order:a,time:(new Date).getTime()};n.value.push(t),console.log(a),console.log((new Date).getTime())}))},g=t=>new Promise(((e,n)=>{setTimeout(e,t)})),v=t=>i(t).dateStr;return(t,e)=>((0,a.uX)(),(0,a.CE)("div",c,[(0,a.Lk)("div",d,[h,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.value,((t,e)=>((0,a.uX)(),(0,a.CE)("div",{class:"",key:e},(0,s.v_)(t.order)+"------------"+(0,s.v_)(v(t.time)),1)))),128))])]))}},v=n(6262);const m=(0,v.A)(g,[["__scopeId","data-v-04555684"]]);var p=m}}]);
//# sourceMappingURL=515.1737706365440.js.map