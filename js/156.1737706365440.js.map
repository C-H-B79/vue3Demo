{"version":3,"file":"js/156.1737706365440.js","mappings":"wMACA,SAASA,IACL,OAAOC,OAAOC,YAAcD,OAAOE,WAEvC,CAEO,SAASC,EAAeC,EAASC,GACpC,MAAMC,EAAUF,EAAUJ,OAAOM,QAC3BC,EAAUF,EAAUL,OAAOO,QAAUR,IAC3C,MAAO,CAACO,EAASC,EACrB,CAEO,SAASC,EAAeF,EAASC,GACpC,MAAMH,EAAUE,EAAUN,OAAOM,QAC3BD,EAAUE,EAAUP,OAAOO,QAAUR,IAC3C,MAAO,CAACK,EAASC,EACrB,C,kJCLA,MAAMI,GAASC,EAAAA,EAAAA,MACf,IAAIC,EAAYF,EAAOG,QAAQ,CAAEC,KAAM,WAAYC,MAAO,CAAEC,KAAM,OAC9DC,EAAaP,EAAOG,QAAQ,CAAEC,KAAM,WAAYC,MAAO,CAAEC,KAAM,OACnEf,OAAOiB,KAAKN,EAAUO,KAAM,aAC5BlB,OAAOiB,KAAKD,EAAWE,KAAM,aAE7B,MAAMC,GAAQC,EAAAA,EAAAA,MAERL,GAAOM,EAAAA,EAAAA,IAAI,KACbF,EAAML,MAAMC,OACdA,EAAKO,MAAQH,EAAML,MAAMC,MAE3B,MAAMQ,GAAOF,EAAAA,EAAAA,IAAI,GACXG,GAAMH,EAAAA,EAAAA,IAAI,GAEVI,GAAUC,EAAAA,EAAAA,IAAS,CACvBC,EAAG,+FACHC,EAAG,+FACHC,EAAG,sEAECC,EAAU,IAAIC,iBAAiB,SACrC,IAAIC,EAAU7B,EAAeoB,EAAKD,MAAOE,EAAIF,OAQ7C,SAASW,EAAWC,GAClBA,EAAEC,iBACF,IAAIC,EAAIF,EAAEG,MAAQd,EAAKD,MACnBgB,EAAIJ,EAAEK,MAAQf,EAAIF,MACtBtB,OAAOwC,YAAeN,IACpB,MAAMO,EAAKP,EAAEG,MAAQD,EACfM,EAAKR,EAAEK,MAAQD,EACrBf,EAAKD,MAAQmB,EACbjB,EAAIF,MAAQoB,EACZ,IAAIC,EAASxC,EAAeoB,EAAKD,MAAOE,EAAIF,OAC5CQ,EAAQc,YAAYD,EAAO,EAE7B3C,OAAO6C,UAAY,KACjB7C,OAAOwC,YAAc,KACrBxC,OAAO6C,UAAY,IAAI,CAE3B,C,OAvBAf,EAAQc,YAAYZ,GACpBF,EAAQgB,UAAaZ,IACnBa,QAAQC,IAAId,GACZ,IAAKE,EAAGE,GAAK9B,EAAe0B,EAAEe,KAAK,GAAIf,EAAEe,KAAK,IAC9C1B,EAAKD,MAAQc,EACbZ,EAAIF,MAAQgB,CAAC,E,wIChCf,MAAMY,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-demo/./src/views/tabsMove/index.js","webpack://vue3-demo/./src/views/tabsMove/index.vue","webpack://vue3-demo/./src/views/tabsMove/index.vue?de1d"],"sourcesContent":["//浏览器窗口导航栏位置\r\nfunction barHeight() {\r\n    return window.outerHeight - window.innerHeight\r\n\r\n}\r\n//获取该窗口的屏幕位置screenX,screenY\r\nexport function clientToScreen(clientX, clientY) {\r\n    const screenX = clientX + window.screenX\r\n    const screenY = clientY + window.screenY + barHeight()\r\n    return [screenX, screenY]\r\n}\r\n\r\nexport function screenToClient(screenX, screenY) {\r\n    const clientX = screenX - window.screenX\r\n    const clientY = screenY - window.screenY - barHeight()\r\n    return [clientX, clientY]\r\n}","<template>\r\n  <div class=\"tabs-move\">\r\n    <div class=\"img-box\">\r\n      <img :src=\"imgList[type]\" alt=\"\" @mousedown=\"handleDown\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { ref, reactive } from \"vue\";\r\nimport { clientToScreen, screenToClient } from \"./index\";\r\nconst router = useRouter();\r\nlet routeItem = router.resolve({ path: \"tabsMove\", query: { type: \"B\" } });\r\nlet routeItem1 = router.resolve({ path: \"tabsMove\", query: { type: \"C\" } });\r\nwindow.open(routeItem.href, \"tabsMoveA\");\r\nwindow.open(routeItem1.href, \"tabsMoveB\");\r\n\r\nconst route = useRoute();\r\n\r\nconst type = ref(\"A\");\r\nif (route.query.type) {\r\n  type.value = route.query.type;\r\n}\r\nconst left = ref(0);\r\nconst top = ref(0);\r\n\r\nconst imgList = reactive({\r\n  A: \"https://img0.baidu.com/it/u=891105205,2558591286&fm=253&fmt=auto&app=138&f=JPEG?w=1140&h=641\",\r\n  B: \"https://img1.baidu.com/it/u=2697531218,1851964626&fm=253&fmt=auto&app=138&f=JPEG?w=758&h=500\",\r\n  C: \"https://img.zcool.cn/community/01e2345f00a38ba801215aa0aae6cf.jpg\",\r\n});\r\nconst channel = new BroadcastChannel(\"cards\");\r\nlet points1 = clientToScreen(left.value, top.value);\r\nchannel.postMessage(points1);\r\nchannel.onmessage = (e) => {\r\n  console.log(e);\r\n  let [x, y] = screenToClient(e.data[0], e.data[1]);\r\n  left.value = x;\r\n  top.value = y;\r\n};\r\nfunction handleDown(e) {\r\n  e.preventDefault();\r\n  let x = e.pageX - left.value;\r\n  let y = e.pageY - top.value;\r\n  window.onmousemove = (e) => {\r\n    const cx = e.pageX - x;\r\n    const cy = e.pageY - y;\r\n    left.value = cx;\r\n    top.value = cy;\r\n    let points = clientToScreen(left.value, top.value);\r\n    channel.postMessage(points);\r\n  };\r\n  window.onmouseup = () => {\r\n    window.onmousemove = null;\r\n    window.onmouseup = null;\r\n  };\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.tabs-move {\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  position: relative;\r\n  .img-box {\r\n    $top: calc(v-bind(top) * 1px);\r\n    $left: calc(v-bind(left) * 1px);\r\n    position: absolute;\r\n    top: $top;\r\n    left: $left;\r\n    width: 400px;\r\n    img {\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=8023e1c0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-8023e1c0\"]])\n\nexport default __exports__"],"names":["barHeight","window","outerHeight","innerHeight","clientToScreen","clientX","clientY","screenX","screenY","screenToClient","router","useRouter","routeItem","resolve","path","query","type","routeItem1","open","href","route","useRoute","ref","value","left","top","imgList","reactive","A","B","C","channel","BroadcastChannel","points1","handleDown","e","preventDefault","x","pageX","y","pageY","onmousemove","cx","cy","points","postMessage","onmouseup","onmessage","console","log","data","__exports__"],"sourceRoot":""}