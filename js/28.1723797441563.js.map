{"version":3,"file":"js/28.1723797441563.js","mappings":"6bAoCA,MAAMA,GAASC,EAAAA,EAAAA,MACTC,GAAMC,EAAAA,EAAAA,IAAI,GACVC,GAASD,EAAAA,EAAAA,OACfE,EAAAA,EAAAA,KAAU,KACRC,aAAaC,aAAe,KAC5BD,aAAaE,YAAc,IAAI,IAGjC,MAAMC,EAAaA,KACjB,IAAIC,EAAYV,EAAOW,QAAQ,CAAEC,KAAM,cACnCC,EAAMH,EAAUI,KACpBV,EAAOW,MAAQC,OAAOC,KAAKJ,EAAK,YAAY,EAMxCK,EAAcA,KAClBhB,EAAIa,QACJ,IAAII,EAAmB,IAAIC,iBAAiB,aAC5CD,EAAiBE,YAAY,YAAcnB,EAAIa,MAAM,EAEjDO,EAAqBA,KACzBhB,aAAaC,aAAe,KAC5BD,aAAaE,YAAc,IAAI,EAE3Be,EAAkBA,KACtBrB,EAAIa,QACJX,EAAOW,MAAMM,YAAY,YAAcnB,EAAIa,MAAO,IAAI,EAElDS,EAAaA,KACjBtB,EAAIa,QACJU,SAASC,OAAU,iBAAgBxB,EAAIa,OAAO,E,kgCC9DhD,MAAMY,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue3-demo/./src/views/crossTab/index.vue","webpack://vue3-demo/./src/views/crossTab/index.vue?4dc9"],"sourcesContent":["<template>\r\n  <div class=\"crossTab\">\r\n    <a-button type=\"primary\" @click=\"openNewTab\">打开新的标签页</a-button>\r\n    <div class=\"tab-list\">\r\n      <div class=\"tab-item\">\r\n        BroadCast Channel可以帮我们创建一个用于广播的通信频道。\r\n        当所有页面都监听同一频道的消息时，其中某一个页面通过它发送的消息就会被其他所有页面收到。\r\n        但是前提是同源页面。\r\n        <a-button type=\"primary\" @click=\"sendMessage\"\r\n          >发送消息(say hello)</a-button\r\n        >\r\n      </div>\r\n      <div class=\"tab-item\">\r\n        LocalStorage window.onstorage 监听<br />使用localStorge存储修改数据，然后使用window.onstorage监听数据变化\r\n        <a-button type=\"primary\" @click=\"changeLocalStorage\"\r\n          >改变localStorage</a-button\r\n        >\r\n      </div>\r\n      <div class=\"tab-item\">\r\n        使用window.open打开新的标签页，然后利用window.postMessage发送消息，在另一个标签页通过window监听message接受消息\r\n        <a-button type=\"primary\" @click=\"sendpostMessage\"\r\n          >发送消息(say hello)</a-button\r\n        >\r\n      </div>\r\n      <div class=\"tab-item\">\r\n        使用cookie循环去查询(setInterval)\r\n        <a-button type=\"primary\" @click=\"setMessage\"\r\n          >设置消息(say hello)</a-button\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\nconst num = ref(0);\r\nconst opener = ref();\r\nonMounted(() => {\r\n  localStorage.personalName = \"张三\";\r\n  localStorage.personalAge = \"16\";\r\n});\r\n\r\nconst openNewTab = () => {\r\n  let routeItem = router.resolve({ path: \"crossTab1\" });\r\n  let url = routeItem.href;\r\n  opener.value = window.open(url, \"crossTab1\");\r\n};\r\n\r\n/**\r\n * BroadCast Channel\r\n */\r\nconst sendMessage = () => {\r\n  num.value++;\r\n  let broadCastChannel = new BroadcastChannel(\"myChannel\");\r\n  broadCastChannel.postMessage(\"say hello\" + num.value);\r\n};\r\nconst changeLocalStorage = () => {\r\n  localStorage.personalName = \"李四\";\r\n  localStorage.personalAge = \"18\";\r\n};\r\nconst sendpostMessage = () => {\r\n  num.value++;\r\n  opener.value.postMessage(\"say hello\" + num.value, \"*\");\r\n};\r\nconst setMessage = () => {\r\n  num.value++;\r\n  document.cookie = `msg=say hello ${num.value}`;\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.crossTab {\r\n  .tab-list {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    .tab-item {\r\n      width: 200px;\r\n      border-radius: 8px;\r\n      padding: 10px;\r\n      border: 2px solid #ccc;\r\n      margin: 10px;\r\n    }\r\n  }\r\n}\r\n</style>","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=58ef942a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58ef942a\"]])\n\nexport default __exports__"],"names":["router","useRouter","num","ref","opener","onMounted","localStorage","personalName","personalAge","openNewTab","routeItem","resolve","path","url","href","value","window","open","sendMessage","broadCastChannel","BroadcastChannel","postMessage","changeLocalStorage","sendpostMessage","setMessage","document","cookie","__exports__"],"sourceRoot":""}